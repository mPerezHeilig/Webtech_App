<!-- bearbeitet von Marcia Perez Heilig -->

<!-- Page showing form for creating a new trip -->

<html>
    <head>
        <title>Travel Planner - Create New Trip</title>
        <link rel="stylesheet" type="text/css" href="./css/default.css">
    </head>
    <body>

        <div class="mother">
            <h1>Travel Planner</h1>
            
            <form id="tripForm">
                <h2>Create New Trip</h2>

                <div class="form-group">
                    <label for="departure_date">Departure Date:</label>
                    <input type="text" id="departure_date" name="departure_date" placeholder="MM/DD/YYYY">
                </div>

                <div class="form-group">
                    <label for="return_date">Return Date:</label>
                    <input type="text" id="return_date" name="return_date" placeholder="MM/DD/YYYY">
                </div>

                <div class="form-group">
                    <label for="country">Country:</label>
                    <select id="country" name="country">
                        <option value="" disabled selected>Choose Country</option>
                        <option value="Spain">Spain</option>
                        <option value="Germany">Germany</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="tourguide">Tourguide:</label>
                    <select id="tourguide" name="tourguide">
                        <option value="" disabled selected>Choose Tourguide</option>
                        <option value="Miguel">Miguel</option>
                        <option value="Hans">Hans</option>
                    </select>
                <div class="form-group"></div>
                
                <div class="form-group">
                    <button type="button" id="submitButton">Add Trip</button>
                    <a href="/index.html">Close</a>
                </div>
            </form>

        </div>
        
        <!-- JavaScript for querying-->
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                // Select the form and the button
                const form = document.getElementById('tripForm');
                const submitButton = document.getElementById('submitButton');

                submitButton.addEventListener('click', (event) => {
                    // Prevent the form from submitting the traditional way
                    event.preventDefault();
                    // Gather form data
                    const newTrip = {
                        dest_country: document.getElementById('country').value,
                        departure_date: document.getElementById('departure_date').value,
                        return_date: document.getElementById('return_date').value,
                        tourguide: document.getElementById('tourguide').value
                    };
                
                    // Send data to server
                    axios.post('/api/addtrip', newTrip)
                        .then(response => {
                            alert('New trip added successfully!');
                            // Clear the form
                            form.reset();
                        })
                        .catch(error => {
                            console.error('Error adding new trip:', error);
                        });
                });
            });
        </script>

    </body>
</html>